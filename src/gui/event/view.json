{
  "@title": "Просмотр мероприятия",
  "@preload": {
    "event": {
      "$from-context": {
        "path": "$response.body.data.items.0",
        "data": {
          "$api-data": {
            "options": {
              "observe": "response"
            },
            "workflow": "event",
            "action": "add",
            "id": {
              "$query-params": {
                "name": "id"
              }
            },
            "query": "event/get_for_view",
            "variables": {
              "id": {
                "$query-params": {
                  "name": "id"
                }
              }
            }
          }
        }
      }
    }
  },
  "type": "object",
  "model": "#data",
  "widget": {
    "name": "container"
  },
  "properties": {
    "breadcrumbs": {
      "type": "object",
      "model": false,
      "widget": {
        "name": "breadcrumb",
        "mobileItems": [
          {
            "label": "Главная",
            "routerLink": "/cabinet/event/list"
          }
        ],
        "items": [
          {
            "label": "Главная",
            "routerLink": "/cabinet/event/list"
          },
          {
            "label": {
              "$from-context": {
                "path": "@preload.event.name"
              }
            }
          }
        ],
        "class": {
          "group": "p-xs-auto mrg-lg-b-xl mrg-b-md"
        }
      }
    },
    "header": {
      "type": "object",
      "widget": {
        "name": "container",
        "options": {
          "label": {
            "$from-context": {
              "path": "@preload.event.name"
            }
          }
        },
        "class": {
          "group": "header-badge-container mrg-b-lg",
          "label": "h1 width-fit-content",
          "value": "width-fit-content"
        }
      },
      "properties": {
        "badge": {
          "type": "string",
          "value": {
            "$from-context": {
              "path": "@preload.event.state"
            }
          },
          "widget": {
            "name": "badge",
            "options": {
              "defaultLabel": "Не заполнено",
              "displayMapping": [
                {
                  "color": "badge_default",
                  "label": "Черновик",
                  "value": "draft"
                },
                {
                  "color": "badge_default",
                  "label": "Предварительная бронь",
                  "value": "pre_booking"
                },
                {
                  "color": "badge_warning",
                  "label": "Получен запрос",
                  "value": "requested"
                },
                {
                  "color": "badge_custom_orange",
                  "label": "Получено ТЗ",
                  "value": "task_received"
                },
                {
                  "color": "badge_active",
                  "label": "Согласована смета",
                  "value": "agreed"
                },
                {
                  "color": "badge_accent",
                  "label": "Пройден check-in",
                  "value": "check_in"
                },
                {
                  "color": "badge_canceled",
                  "label": "Пройден check-out",
                  "value": "check_out"
                },
                {
                  "color": "badge_error",
                  "label": "Отменено",
                  "value": "canceled"
                }
              ]
            }
          }
        }
      }
    },
    "warning-container": {
      "type": "object",
      "widget": {
        "name": "container",
        "options": {
          "visible": {
            "$not-empty": {
              "data": {
                "$from-context": {
                  "path": "@preload.event.requests"
                }
              }
            }
          }
        },
        "class": {
          "group": "mrg-b-md",
          "value": "p-autolayout p-ai-center"
        }
      },
      "properties": {
        "icon": {
          "type": "string",
          "widget": {
            "name": "icon",
            "options": {
              "tooltip": "По мероприятию существует несогласованная заявка",
              "tooltipPosition": "top"
            },
            "class": {
              "icon": "icon-alert",
              "value": "mrg-r-xs"
            }
          }
        },
        "warning": {
          "type": "string",
          "value": "Есть несогласованная заявка. Информация в карточке мероприятия может быть неактуальной.",
          "widget": {
            "name": "info",
            "class": {
              "label": "form-label form-label_view text-color_blocked",
              "value": "fw-300 mrg-b-0 text-color_blocked"
            }
          }
        }
      }
    },
    "tabs-content-container": {
      "type": "object",
      "model": false,
      "widget": {
        "name": "container",
        "class": {
          "value": "tabview-with-actions-menu"
        }
      },
      "properties": {
        "tabs": {
          "type": "object",
          "model": false,
          "widget": {
            "key": "tabs",
            "name": "tab-view"
          },
          "properties": {
            "commonInfo": {
              "type": "object",
              "model": false,
              "widget": {
                "key": "commonInfo",
                "name": "tab-panel",
                "options": {
                  "label": "Общие данные"
                }
              },
              "properties": {
                "eventCommonInfo": {
                  "type": "object",
                  "model": "#data.commonInfo",
                  "value": {
                    "$json-model": {
                      "data": {
                        "$from-context": {
                          "path": "@preload.event"
                        }
                      },
                      "alias": "#data.commonInfo"
                    }
                  },
                  "widget": {
                    "name": "container",
                    "options": {
                      "label": "Общие сведения о мероприятии"
                    },
                    "class": {
                      "label": "h2 mrg-b-md",
                      "value": "mrg-b-xl"
                    }
                  },
                  "properties": {
                    "preliminary": {
                      "type": "boolean",
                      "widget": {
                        "name": "hidden"
                      }
                    },
                    "contractSigned": {
                      "type": "boolean",
                      "widget": {
                        "name": "hidden"
                      }
                    },
                    "actSigned": {
                      "type": "boolean",
                      "widget": {
                        "name": "hidden"
                      }
                    },
                    "contractSignedView": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Договор подписан",
                          "viewedValue": {
                            "$if": {
                              "condition": {
                                "$subs": {
                                  "path": "#data.commonInfo.contractSigned"
                                }
                              },
                              "then": "Да",
                              "else": "Нет"
                            }
                          }
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "actSignedView": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Акт подписан",
                          "viewedValue": {
                            "$if": {
                              "condition": {
                                "$subs": {
                                  "path": "#data.commonInfo.actSigned"
                                }
                              },
                              "then": "Да",
                              "else": "Нет"
                            }
                          }
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "preliminaryView": {
                      "type": "string",
                      "widget": {
                        "name": "hidden",
                        "options": {
                          "label": "Протокольное мероприятие",
                          "viewedValue": {
                            "$if": {
                              "condition": {
                                "$subs": {
                                  "path": "#data.commonInfo.preliminary"
                                }
                              },
                              "then": "Да",
                              "else": "Нет"
                            }
                          }
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "name": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Наименование мероприятия"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "eventType": {
                      "type": "object",
                      "widget": {
                        "name": "container"
                      },
                      "properties": {
                        "name": {
                          "type": "string",
                          "widget": {
                            "name": "info",
                            "options": {
                              "label": "Вид мероприятия",
                              "emptyText": "Не указано"
                            },
                            "class": {
                              "group": "form-item p-field p-grid",
                              "label": "form-label form-label_view p-xs-12 p-md-4",
                              "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                            }
                          }
                        }
                      }
                    },
                    "eventGroupEvent": {
                      "type": "array",
                      "widget": {
                        "name": "container",
                        "options": {
                          "label": "Группа",
                          "visible": {
                            "$not-empty": {
                              "data": {
                                "$from-context": {
                                  "path": "@preload.event.eventGroupEvent"
                                }
                              }
                            }
                          }
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      },
                      "items": {
                        "type": "object",
                        "widget": "container",
                        "properties": {
                          "_id": {
                            "type": "string",
                            "widget": "hidden"
                          },
                          "name": {
                            "type": "string",
                            "widget": "hidden"
                          },
                          "link": {
                            "type": "string",
                            "widget": {
                              "name": "link",
                              "options": {
                                "target": "_blank",
                                "href": {
                                  "$replace": {
                                    "template": "/cabinet/event_group/view?id={{id}}",
                                    "data": {
                                      "id": {
                                        "$subs": {
                                          "path": "#data.commonInfo.eventGroupEvent[]._id"
                                        }
                                      }
                                    }
                                  }
                                },
                                "queryParams": {
                                  "id": {
                                    "$subs": {
                                      "path": "#data.commonInfo.eventGroupEvent[]._id"
                                    }
                                  }
                                },
                                "disabled": {
                                  "$not": {
                                    "data": {
                                      "$active-user-has-permission": {
                                        "permission": "event_group.view.active"
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "value": {
                              "$subs": {
                                "path": "#data.commonInfo.eventGroupEvent[].name"
                              }
                            }
                          }
                        }
                      }
                    },
                    "country": {
                      "type": "string",
                      "widget": {
                        "name": "hidden"
                      }
                    },
                    "countryView": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Страна/регион",
                          "viewedValue": {
                            "$switch": {
                              "condition": {
                                "$subs": {
                                  "path": "#data.commonInfo.country"
                                }
                              },
                              "default": "",
                              "cases": [
                                {
                                  "value": "ru",
                                  "action": "Российская Федерация"
                                },
                                {
                                  "value": "rt",
                                  "action": "Республика Татарстан"
                                },
                                {
                                  "value": "other",
                                  "action": "Зарубежные страны"
                                }
                              ]
                            }
                          },
                          "emptyText": "Не указано"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "eventIndustry": {
                      "type": "object",
                      "widget": {
                        "name": "container"
                      },
                      "properties": {
                        "name": {
                          "type": "string",
                          "widget": {
                            "name": "info",
                            "options": {
                              "label": "Отрасль",
                              "emptyText": "Не указано"
                            },
                            "class": {
                              "group": "form-item p-field p-grid",
                              "label": "form-label form-label_view p-xs-12 p-md-4",
                              "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                            }
                          }
                        }
                      }
                    },
                    "description": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Описание",
                          "emptyText": "Не указано"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "numberOfPeople": {
                      "type": "number",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Количество человек",
                          "emptyText": "Не указано",
                          "formatter": "number:'1.0-0':'ru'"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "numberOfExhibitors": {
                      "type": "number",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Количество экспонентов",
                          "emptyText": "Не указано",
                          "formatter": "number:'1.0-0':'ru'"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "numberOfCountries": {
                      "type": "number",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Количество стран-участниц",
                          "emptyText": "Не указано",
                          "formatter": "number:'1.0-0':'ru'"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "standardBuilding": {
                      "type": "number",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Стандартная застройка (м²)",
                          "formatter": "number:'0.2-2':'ru'",
                          "viewedValue": {
                            "$var": {
                              "path": "."
                            }
                          },
                          "emptyText": "Не указано"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "buildingAreaNet": {
                      "type": "number",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Площадь застройки нетто (м²)",
                          "formatter": "number:'0.2-2':'ru'",
                          "viewedValue": {
                            "$var": {
                              "path": "."
                            }
                          },
                          "emptyText": "Не указано"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "sitePlacement": {
                      "type": "string",
                      "widget": {
                        "name": "hidden"
                      }
                    },
                    "sitePlacementView": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Размещение на сайте",
                          "viewedValue": {
                            "$switch": {
                              "condition": {
                                "$subs": {
                                  "path": "#data.commonInfo.sitePlacement"
                                }
                              },
                              "default": "",
                              "cases": [
                                {
                                  "value": "no_request",
                                  "action": "Официальный запрос не поступил"
                                },
                                {
                                  "value": "yes",
                                  "action": "Да"
                                },
                                {
                                  "value": "no",
                                  "action": "Нет"
                                }
                              ]
                            }
                          }
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "protocolEvent": {
                      "type": "boolean",
                      "widget": {
                        "name": "hidden"
                      }
                    },
                    "protocolEventView": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Протокольное мероприятие",
                          "viewedValue": {
                            "$if": {
                              "condition": {
                                "$subs": {
                                  "path": "#data.commonInfo.protocolEvent"
                                }
                              },
                              "then": "Да",
                              "else": "Нет"
                            }
                          }
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "comment": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Комментарий",
                          "emptyText": "Не указано"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    }
                  }
                },
                "organizerList": {
                  "type": "object",
                  "model": false,
                  "widget": {
                    "name": "container"
                  },
                  "properties": {
                    "header": {
                      "type": "object",
                      "widget": {
                        "name": "container",
                        "options": {
                          "label": "Сведения об организаторах"
                        },
                        "class": {
                          "group": "flex-row p-grid mrg-b-lg mrg-t-0",
                          "label": "h2 p-xs-12 p-md-4 p-xl-3 pdd-tb-0 mrg-md-b-md",
                          "value": "p-xs-12 p-md-8 p-xl-9 pdd-tb-0"
                        }
                      }
                    },
                    "organizers": {
                      "type": "array",
                      "model": "#data.organizers",
                      "widget": {
                        "name": "table",
                        "options": {
                          "paginator": false,
                          "emptyMessage": "Не добавлено информации для отображения",
                          "responsive": false,
                          "sortField": "organizerNumber",
                          "sortOrder": 1
                        },
                        "class": {
                          "value": "data-table d-block mrg-b-lg"
                        }
                      },
                      "items": {
                        "type": "object",
                        "properties": {
                          "organizerNumber": {
                            "type": "number",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "label": "№",
                                "viewedValue": {
                                  "$collection": {
                                    "action": "row-number"
                                  }
                                }
                              }
                            }
                          },
                          "name": {
                            "type": "string",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "visible": false
                              }
                            }
                          },
                          "state": {
                            "type": "string",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "visible": false
                              }
                            }
                          },
                          "organizerInfo": {
                            "type": "object",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "label": "Наименование контрагента"
                              }
                            },
                            "properties": {
                              "link": {
                                "type": "string",
                                "model": false,
                                "widget": {
                                  "name": "link",
                                  "options": {
                                    "target": "_blank",
                                    "viewedValue": {
                                      "$from-context": {
                                        "path": "$rowData.name"
                                      }
                                    },
                                    "routerLink": "/cabinet/partner/view",
                                    "queryParams": {
                                      "id": {
                                        "$from-context": {
                                          "path": "$rowData.organizerId"
                                        }
                                      }
                                    },
                                    "visible": {
                                      "$and": {
                                        "operands": [
                                          {
                                            "$active-user-has-permission": {
                                              "permission": "partner.view"
                                            }
                                          },
                                          {
                                            "!==": {
                                              "operand1": {
                                                "$from-context": {
                                                  "path": "$rowData.state"
                                                }
                                              },
                                              "operand2": "deleted"
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              "name": {
                                "type": "string",
                                "model": false,
                                "widget": {
                                  "name": "info",
                                  "options": {
                                    "viewedValue": {
                                      "$from-context": {
                                        "path": "$rowData.name"
                                      }
                                    },
                                    "visible": {
                                      "$or": {
                                        "operands": [
                                          {
                                            "$not": {
                                              "data": {
                                                "$active-user-has-permission": {
                                                  "permission": "partner.view"
                                                }
                                              }
                                            }
                                          },
                                          {
                                            "===": {
                                              "operand1": {
                                                "$from-context": {
                                                  "path": "$rowData.state"
                                                }
                                              },
                                              "operand2": "deleted"
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "mainContactPerson": {
                            "type": "object",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "label": "Контактное лицо"
                              }
                            },
                            "properties": {
                              "fullName": {
                                "type": "string",
                                "widget": {
                                  "name": "info"
                                }
                              },
                              "phone": {
                                "type": "string",
                                "widget": {
                                  "name": "info"
                                }
                              }
                            }
                          }
                        }
                      },
                      "value": {
                        "$if": {
                          "condition": {
                            "$not-empty": {
                              "data": {
                                "$from-context": {
                                  "path": "@preload.event.organizers"
                                }
                              }
                            }
                          },
                          "then": {
                            "$array-pluck": {
                              "array": {
                                "$from-context": {
                                  "path": "@preload.event.organizers"
                                }
                              },
                              "key": "partner"
                            }
                          },
                          "else": []
                        }
                      }
                    }
                  }
                },
                "curatorList": {
                  "type": "object",
                  "model": false,
                  "widget": {
                    "name": "container"
                  },
                  "properties": {
                    "header": {
                      "type": "object",
                      "widget": {
                        "name": "container",
                        "options": {
                          "label": "Сведения о кураторах"
                        },
                        "class": {
                          "group": "flex-row p-grid mrg-b-lg mrg-t-0",
                          "label": "h2 p-xs-12 p-md-4 p-xl-3 pdd-tb-0 mrg-md-b-md",
                          "value": "p-xs-12 p-md-8 p-xl-9 pdd-tb-0"
                        }
                      }
                    },
                    "curators": {
                      "type": "array",
                      "model": "#data.curators",
                      "widget": {
                        "name": "table",
                        "options": {
                          "paginator": false,
                          "emptyMessage": "Не добавлено информации для отображения",
                          "sortField": "userNumber",
                          "sortOrder": 1
                        },
                        "class": {
                          "value": "data-table d-block mrg-b-lg"
                        }
                      },
                      "items": {
                        "type": "object",
                        "properties": {
                          "userNumber": {
                            "type": "number",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "label": "№",
                                "viewedValue": {
                                  "$collection": {
                                    "action": "row-number"
                                  }
                                }
                              },
                              "class": {
                                "value": "p-col-4 data-table_table-fixed"
                              }
                            }
                          },
                          "fullName": {
                            "type": "string",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "visible": false
                              }
                            }
                          },
                          "phoneView": {
                            "type": "string",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "visible": false
                              }
                            }
                          },
                          "userInfo": {
                            "type": "object",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "label": "Куратор от МВЦ"
                              }
                            },
                            "properties": {
                              "link": {
                                "type": "string",
                                "model": false,
                                "widget": {
                                  "name": "link",
                                  "options": {
                                    "target": "_blank",
                                    "viewedValue": {
                                      "$from-context": {
                                        "path": "$rowData.fullName"
                                      }
                                    },
                                    "routerLink": "/cabinet/user/view",
                                    "queryParams": {
                                      "id": {
                                        "$from-context": {
                                          "path": "$rowData.userId"
                                        }
                                      }
                                    },
                                    "visible": {
                                      "$active-user-has-permission": {
                                        "permission": "user.view.active"
                                      }
                                    }
                                  }
                                }
                              },
                              "name": {
                                "type": "string",
                                "model": false,
                                "widget": {
                                  "name": "info",
                                  "options": {
                                    "viewedValue": {
                                      "$from-context": {
                                        "path": "$rowData.fullName"
                                      }
                                    },
                                    "visible": {
                                      "$not": {
                                        "data": {
                                          "$active-user-has-permission": {
                                            "permission": "user.view.active"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "phone": {
                                "type": "string",
                                "widget": {
                                  "name": "info",
                                  "options": {
                                    "viewedValue": {
                                      "$from-context": {
                                        "path": "$rowData.phoneView"
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      },
                      "value": {
                        "$if": {
                          "condition": {
                            "$not-empty": {
                              "data": {
                                "$from-context": {
                                  "path": "@preload.event.curators"
                                }
                              }
                            }
                          },
                          "then": {
                            "$array-pluck": {
                              "array": {
                                "$from-context": {
                                  "path": "@preload.event.curators"
                                }
                              },
                              "key": "user"
                            }
                          },
                          "else": []
                        }
                      }
                    }
                  }
                }
              }
            },
            "workingHours": {
              "type": "object",
              "model": false,
              "widget": {
                "key": "workingHours",
                "name": "tab-panel",
                "options": {
                  "label": "График работы"
                }
              },
              "properties": {
                "eventWorkingHours": {
                  "type": "object",
                  "model": "#data.workingHours",
                  "value": {
                    "$json-model": {
                      "data": {
                        "$from-context": {
                          "path": "@preload.event"
                        }
                      },
                      "alias": "#data.workingHours"
                    }
                  },
                  "widget": {
                    "name": "container",
                    "options": {
                      "label": "График работы мероприятия"
                    },
                    "class": {
                      "label": "h2 mrg-b-md"
                    }
                  },
                  "properties": {
                    "installationStart": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Начало монтажных работ",
                          "viewedValue": {
                            "$date-format": {
                              "template": "DD.MM.YYYY HH:mm",
                              "nameZone": "ETC/GMT+0",
                              "value": {
                                "$var": {
                                  "path": "."
                                }
                              }
                            }
                          },
                          "emptyText": "Не указано"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "installationEnd": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Завершение монтажных работ",
                          "viewedValue": {
                            "$date-format": {
                              "template": "DD.MM.YYYY HH:mm",
                              "nameZone": "ETC/GMT+0",
                              "value": {
                                "$var": {
                                  "path": "."
                                }
                              }
                            }
                          },
                          "emptyText": "Не указано"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "eventStart": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Начало мероприятия",
                          "viewedValue": {
                            "$date-format": {
                              "template": "DD.MM.YYYY HH:mm",
                              "nameZone": "ETC/GMT+0",
                              "value": {
                                "$var": {
                                  "path": "."
                                }
                              }
                            }
                          }
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "eventEnd": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Завершение мероприятия",
                          "viewedValue": {
                            "$date-format": {
                              "template": "DD.MM.YYYY HH:mm",
                              "nameZone": "ETC/GMT+0",
                              "value": {
                                "$var": {
                                  "path": "."
                                }
                              }
                            }
                          }
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "deinstallationStart": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Начало демонтажных работ",
                          "viewedValue": {
                            "$date-format": {
                              "template": "DD.MM.YYYY HH:mm",
                              "nameZone": "ETC/GMT+0",
                              "value": {
                                "$var": {
                                  "path": "."
                                }
                              }
                            }
                          },
                          "emptyText": "Не указано"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "deinstallationEnd": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Завершение демонтажных работ",
                          "viewedValue": {
                            "$date-format": {
                              "template": "DD.MM.YYYY HH:mm",
                              "nameZone": "ETC/GMT+0",
                              "value": {
                                "$var": {
                                  "path": "."
                                }
                              }
                            }
                          },
                          "emptyText": "Не указано"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "arrival": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Заезд участников",
                          "viewedValue": {
                            "$date-format": {
                              "template": "DD.MM.YYYY HH:mm",
                              "nameZone": "ETC/GMT+0",
                              "value": {
                                "$var": {
                                  "path": "."
                                }
                              }
                            }
                          },
                          "emptyText": "Не указано"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "secondImport": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Дозавоз",
                          "viewedValue": {
                            "$date-format": {
                              "template": "DD.MM.YYYY HH:mm",
                              "nameZone": "ETC/GMT+0",
                              "value": {
                                "$var": {
                                  "path": "."
                                }
                              }
                            }
                          },
                          "emptyText": "Не указано"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "openingOfExhibition": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Открытие выставки для посетителей",
                          "viewedValue": {
                            "$date-format": {
                              "template": "DD.MM.YYYY HH:mm",
                              "nameZone": "ETC/GMT+0",
                              "value": {
                                "$var": {
                                  "path": "."
                                }
                              }
                            }
                          },
                          "emptyText": "Не указано"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "closingOfExhibition": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Закрытие выставки для посетителей",
                          "viewedValue": {
                            "$date-format": {
                              "template": "DD.MM.YYYY HH:mm",
                              "nameZone": "ETC/GMT+0",
                              "value": {
                                "$var": {
                                  "path": "."
                                }
                              }
                            }
                          },
                          "emptyText": "Не указано"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "departure": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Выход участников из павильона",
                          "viewedValue": {
                            "$date-format": {
                              "template": "DD.MM.YYYY HH:mm",
                              "nameZone": "ETC/GMT+0",
                              "value": {
                                "$var": {
                                  "path": "."
                                }
                              }
                            }
                          },
                          "emptyText": "Не указано"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "departureOnLastDay": {
                      "type": "string",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Выход из павильона в последний день",
                          "viewedValue": {
                            "$date-format": {
                              "template": "DD.MM.YYYY HH:mm",
                              "nameZone": "ETC/GMT+0",
                              "value": {
                                "$var": {
                                  "path": "."
                                }
                              }
                            }
                          },
                          "emptyText": "Не указано"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    }
                  }
                }
              }
            },
            "rent": {
              "type": "object",
              "model": false,
              "widget": {
                "key": "rent",
                "name": "tab-panel",
                "options": {
                  "label": "Аренда"
                }
              },
              "properties": {
                "bookings": {
                  "type": "object",
                  "widget": {
                    "name": "container",
                    "model": false,
                    "class": {
                      "label": "h2 mrg-b-md"
                    }
                  },
                  "properties": {
                    "header": {
                      "type": "object",
                      "widget": {
                        "name": "container",
                        "options": {
                          "label": "Помещения"
                        },
                        "class": {
                          "group": "flex-row p-grid mrg-b-lg mrg-t-0",
                          "label": "h2 p-xs-12 p-md-4 p-xl-3 pdd-tb-0 mrg-md-b-md",
                          "value": "p-xs-12 p-md-8 p-xl-9 pdd-tb-0 p-autolayout"
                        }
                      }
                    },
                    "bookings": {
                      "type": "any",
                      "model": "#data.bookings",
                      "value": {
                        "$array-map": {
                          "array": {
                            "$json-model": {
                              "alias": "#data.bookings",
                              "data": {
                                "$from-context": {
                                  "path": "$response.body.data.pagination.items",
                                  "data": {
                                    "$api-data": {
                                      "options": {
                                        "observe": "response"
                                      },
                                      "query": "booking/list",
                                      "id": {
                                        "$query-params": {
                                          "name": "id"
                                        }
                                      },
                                      "variables": {
                                        "eventId": {
                                          "$query-params": {
                                            "name": "id"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "map": {
                            "$if": {
                              "condition": {
                                ">": {
                                  "operand1": {
                                    "$length": {
                                      "data": {
                                        "$array-filter": {
                                          "array": {
                                            "$from-context": {
                                              "path": "$data.additionalFacilities"
                                            }
                                          },
                                          "filter": {
                                            "===": {
                                              "operand1": {
                                                "$from-context": {
                                                  "path": "$data.1.state"
                                                }
                                              },
                                              "operand2": "filled"
                                            }
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "operand2": 0
                                }
                              },
                              "then": {
                                "$assign-object": {
                                  "path": "",
                                  "data": {
                                    "allPriceWithDiscountOrMarkup": {
                                      "$sum": {
                                        "terms": [
                                          {
                                            "$from-context": {
                                              "path": "$data.allPriceWithDiscountOrMarkup"
                                            }
                                          },
                                          {
                                            "$array-sum": {
                                              "data": {
                                                "$array-map": {
                                                  "array": {
                                                    "$array-filter": {
                                                      "array": {
                                                        "$from-context": {
                                                          "path": "$data.additionalFacilities"
                                                        }
                                                      },
                                                      "filter": {
                                                        "===": {
                                                          "operand1": {
                                                            "$from-context": {
                                                              "path": "$data.1.state"
                                                            }
                                                          },
                                                          "operand2": "filled"
                                                        }
                                                      }
                                                    }
                                                  },
                                                  "map": {
                                                    "$if": {
                                                      "condition": {
                                                        "$and": {
                                                          "operands": [
                                                            {
                                                              "$not-empty": {
                                                                "data": {
                                                                  "$from-context": {
                                                                    "path": "$data.1.totalPriceWithDiscountOrMarkup"
                                                                  }
                                                                }
                                                              }
                                                            },
                                                            {
                                                              "!==": {
                                                                "operand1": {
                                                                  "$from-context": {
                                                                    "path": "$data.1.totalPriceWithDiscountOrMarkup"
                                                                  }
                                                                },
                                                                "operand2": 0
                                                              }
                                                            }
                                                          ]
                                                        }
                                                      },
                                                      "then": {
                                                        "price": {
                                                          "$from-context": {
                                                            "path": "$data.1.totalPriceWithDiscountOrMarkup"
                                                          }
                                                        }
                                                      },
                                                      "else": {
                                                        "price": {
                                                          "$from-context": {
                                                            "path": "$data.1.totalPrice"
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              },
                                              "keyPath": "price"
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  },
                                  "object": {
                                    "$if": {
                                      "condition": {
                                        ">": {
                                          "operand1": {
                                            "$length": {
                                              "data": {
                                                "$from-context": {
                                                  "path": "$data.rooms"
                                                }
                                              }
                                            }
                                          },
                                          "operand2": 1
                                        }
                                      },
                                      "then": {
                                        "$from-context": {
                                          "path": "$data"
                                        }
                                      },
                                      "else": {
                                        "$exclude": {
                                          "data": {
                                            "$assign-object": {
                                              "path": "bookingRoom",
                                              "data": {
                                                "$from-context": {
                                                  "path": "$data.rooms.0.room"
                                                }
                                              },
                                              "object": {
                                                "$from-context": {
                                                  "path": "$data"
                                                }
                                              }
                                            }
                                          },
                                          "exclude": [
                                            "rooms"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "else": {
                                "$if": {
                                  "condition": {
                                    ">": {
                                      "operand1": {
                                        "$length": {
                                          "data": {
                                            "$from-context": {
                                              "path": "$data.rooms"
                                            }
                                          }
                                        }
                                      },
                                      "operand2": 1
                                    }
                                  },
                                  "then": {
                                    "$from-context": {
                                      "path": "$data"
                                    }
                                  },
                                  "else": {
                                    "$exclude": {
                                      "data": {
                                        "$assign-object": {
                                          "path": "bookingRoom",
                                          "data": {
                                            "$from-context": {
                                              "path": "$data.rooms.0.room"
                                            }
                                          },
                                          "object": {
                                            "$from-context": {
                                              "path": "$data"
                                            }
                                          }
                                        }
                                      },
                                      "exclude": [
                                        "rooms"
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      },
                      "widget": {
                        "name": "tree-table",
                        "options": {
                          "childrenKey": "rooms",
                          "nodeAsData": true
                        },
                        "class": {
                          "togglerWrapper": "p-grid p-nogutter p-autolayout p-jc-center pdd-tb-0 pdd-lr-0 mrg-tb-0 mrg-l-0 mrg-r-xs",
                          "value": "data-table d-block mrg-b-lg",
                          "rootItemsRow": "treetable__node_root_background"
                        },
                        "columns": {
                          "rowNumber": {
                            "type": "string",
                            "widget": {
                              "name": "info",
                              "class": {
                                "value": "p-jc-center"
                              }
                            },
                            "value": "№"
                          },
                          "name": "Помещение",
                          "bookingPeriod": {
                            "type": "string",
                            "widget": {
                              "name": "info",
                              "class": {
                                "value": "p-jc-center"
                              }
                            },
                            "value": "Период бронирования"
                          },
                          "allSquare": {
                            "type": "string",
                            "widget": {
                              "name": "info",
                              "class": {
                                "value": "p-jc-end"
                              }
                            },
                            "value": "Бронируемая площадь (м²)"
                          },
                          "numberOfPeople": {
                            "type": "string",
                            "widget": {
                              "name": "info",
                              "class": {
                                "value": "p-jc-end"
                              }
                            },
                            "value": "Количество человек"
                          },
                          "priceView": {
                            "type": "string",
                            "widget": {
                              "name": "info",
                              "class": {
                                "value": "p-jc-end"
                              }
                            },
                            "value": "Общая стоимость (руб.)"
                          },
                          "comment": "Комментарий",
                          "actions": {
                            "type": "string",
                            "widget": {
                              "name": "info",
                              "class": {
                                "value": "p-jc-center"
                              }
                            },
                            "value": "Действия"
                          }
                        },
                        "items": {
                          "id": {
                            "type": "string",
                            "widget": "hidden"
                          },
                          "rowNumber": {
                            "type": "string",
                            "widget": {
                              "name": "info",
                              "class": {
                                "group": "p-autolayout p-jc-center p-ai-center",
                                "value": "p-ai-center"
                              }
                            },
                            "value": {
                              "$if": {
                                "condition": {
                                  "$empty": {
                                    "data": {
                                      "$from-context": {
                                        "path": "$tree.node.id"
                                      }
                                    }
                                  }
                                },
                                "then": {
                                  "$apply-func": {
                                    "func": "const cleanedInput = input.replace(/[/[]/g, ''); const numbers = cleanedInput.split(']'); const transformedNumbers = numbers.map(num => parseInt(num, 10) + 1); const result = `${transformedNumbers[0]}.${transformedNumbers[1]}`; return result;",
                                    "args": {
                                      "input": {
                                        "$from-context": {
                                          "path": "$tree.node.path"
                                        }
                                      }
                                    }
                                  }
                                },
                                "else": {
                                  "$sum": {
                                    "terms": [
                                      {
                                        "$from-context": {
                                          "path": "$tree.index"
                                        }
                                      },
                                      1
                                    ]
                                  }
                                }
                              }
                            }
                          },
                          "roomId": {
                            "type": "string",
                            "widget": "hidden"
                          },
                          "name": {
                            "type": "string",
                            "widget": {
                              "name": "info"
                            },
                            "value": {
                              "$if": {
                                "condition": {
                                  "$not-empty": {
                                    "data": {
                                      "$from-context": {
                                        "path": "$tree.node.id"
                                      }
                                    }
                                  }
                                },
                                "then": {
                                  "$from-context": {
                                    "path": "$tree.node.name"
                                  }
                                },
                                "else": {
                                  "$from-context": {
                                    "path": "$tree.node.room.name"
                                  }
                                }
                              }
                            }
                          },
                          "minDate": {
                            "type": "datetime",
                            "widget": "hidden"
                          },
                          "maxDate": {
                            "type": "datetime",
                            "widget": "hidden"
                          },
                          "bookingPeriod": {
                            "type": "string",
                            "widget": {
                              "name": "info",
                              "class": {
                                "value": "p-jc-center"
                              }
                            },
                            "value": {
                              "$replace": {
                                "template": "{{minDate}} - {{maxDate}}",
                                "data": {
                                  "minDate": {
                                    "$if": {
                                      "condition": {
                                        "$not-empty": {
                                          "data": {
                                            "$from-context": {
                                              "path": "$tree.node.minDate"
                                            }
                                          }
                                        }
                                      },
                                      "then": {
                                        "$formatter": {
                                          "format": "datetime:\"DD.MM.YYYY HH:mm\"",
                                          "data": {
                                            "$from-context": {
                                              "path": "$tree.node.minDate"
                                            }
                                          }
                                        }
                                      },
                                      "else": ""
                                    }
                                  },
                                  "maxDate": {
                                    "$if": {
                                      "condition": {
                                        "$not-empty": {
                                          "data": {
                                            "$from-context": {
                                              "path": "$tree.node.maxDate"
                                            }
                                          }
                                        }
                                      },
                                      "then": {
                                        "$formatter": {
                                          "format": "datetime:\"DD.MM.YYYY HH:mm\"",
                                          "data": {
                                            "$from-context": {
                                              "path": "$tree.node.maxDate"
                                            }
                                          }
                                        }
                                      },
                                      "else": ""
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "allSquare": {
                            "type": "number",
                            "widget": {
                              "name": "info",
                              "options": {
                                "formatter": "number:'0.2-2':'ru'"
                              },
                              "class": {
                                "value": "p-jc-end"
                              }
                            }
                          },
                          "numberOfPeople": {
                            "type": "string",
                            "widget": {
                              "name": "info",
                              "class": {
                                "value": "p-jc-end"
                              }
                            }
                          },
                          "allPrice": {
                            "type": "number",
                            "widget": {
                              "name": "info"
                            }
                          },
                          "allPriceWithDiscountOrMarkup": {
                            "type": "number",
                            "widget": {
                              "name": "info"
                            }
                          },
                          "priceView": {
                            "type": "string",
                            "widget": {
                              "name": "info",
                              "options": {
                                "formatter": "number:'0.2-2':'ru'"
                              },
                              "class": {
                                "value": "p-jc-end"
                              }
                            },
                            "value": {
                              "$if": {
                                "condition": {
                                  "$not-empty": {
                                    "data": {
                                      "$from-context": {
                                        "path": "$tree.node.allPriceWithDiscountOrMarkup"
                                      }
                                    }
                                  }
                                },
                                "then": {
                                  "$from-context": {
                                    "path": "$tree.node.allPriceWithDiscountOrMarkup"
                                  }
                                },
                                "else": {
                                  "$from-context": {
                                    "path": "$tree.node.allPrice"
                                  }
                                }
                              }
                            }
                          },
                          "comment": {
                            "type": "string",
                            "widget": "info"
                          },
                          "seatingType": {
                            "type": "string",
                            "widget": "hidden"
                          },
                          "additionalFacilities": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "totalPrice": {
                                  "type": "number"
                                },
                                "totalPriceWithDiscountOrMarkup": {
                                  "type": "number"
                                },
                                "state": {
                                  "type": "string"
                                }
                              }
                            },
                            "widget": {
                              "name": "table"
                            }
                          },
                          "actions": {
                            "type": "any",
                            "widget": {
                              "name": "menu-button",
                              "options": {
                                "tableMode": false,
                                "labelKey": "title"
                              },
                              "class": {
                                "toggle": "actions-button actions-button_darker",
                                "value": "p-jc-center"
                              },
                              "items": [
                                {
                                  "title": "Просмотреть",
                                  "visible": {
                                    "$not-empty": {
                                      "data": {
                                        "$from-context": {
                                          "path": "$tree.node.id"
                                        }
                                      }
                                    }
                                  },
                                  "command": {
                                    "$go": {
                                      "workflow": "booking",
                                      "action": "view",
                                      "id": {
                                        "$from-context": {
                                          "path": "$tree.node.id"
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "serviceList": {
                  "type": "object",
                  "model": false,
                  "widget": {
                    "name": "container"
                  },
                  "properties": {
                    "header": {
                      "type": "object",
                      "widget": {
                        "name": "container",
                        "options": {
                          "label": "Дополнительные услуги к мероприятию"
                        },
                        "class": {
                          "group": "flex-row p-grid mrg-b-lg mrg-t-0",
                          "label": "h2 p-xs-12 p-md-4 p-xl-3 pdd-tb-0 mrg-md-b-md",
                          "value": "p-xs-12 p-md-8 p-xl-9 pdd-tb-0"
                        }
                      }
                    },
                    "services": {
                      "type": "array",
                      "model": "#data.services",
                      "value": {
                        "$api-table-workflow-data": {
                          "model": "#data.services",
                          "query": "additional_facilities/list",
                          "id": {
                            "$query-params": {
                              "name": "id"
                            }
                          },
                          "variables": {
                            "$assign-object": {
                              "object": {
                                "$graphql-event-variables": {
                                  "data": {
                                    "$element-event": {
                                      "event": "lazyLoad"
                                    }
                                  }
                                }
                              },
                              "data": {
                                "eventId": {
                                  "$query-params": {
                                    "name": "id"
                                  }
                                },
                                "facilityType": "additional_service"
                              },
                              "path": ""
                            }
                          },
                          "errors": {
                            "default": {
                              "$message": {
                                "severity": "error",
                                "summary": "Ошибка",
                                "detail": "При загрузке данных произошла ошибка, повторите попытку позднее"
                              }
                            }
                          }
                        }
                      },
                      "widget": {
                        "name": "table-lazy",
                        "options": {
                          "emptyMessage": "Не добавлено информации для отображения",
                          "responsive": false,
                          "first": 0,
                          "rows": 10,
                          "paginator": true,
                          "rowsPerPageOptions": [
                            10,
                            20,
                            50
                          ],
                          "routerOptions": [
                            "first",
                            "rows"
                          ]
                        },
                        "class": {
                          "value": "data-table d-block mrg-b-lg"
                        },
                        "events": {
                          "lazyLoad": {
                            "$element-option": {
                              "path": "#data.services",
                              "option": "loading",
                              "value": true
                            }
                          }
                        },
                        "subscriptions": {
                          "reload-service-table": {
                            "subscriber": "serviceTable",
                            "action": {
                              "$element-event": {
                                "path": "#data.services",
                                "event": "reload",
                                "value": true
                              }
                            }
                          }
                        }
                      },
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "visible": false
                              }
                            }
                          },
                          "serviceNumber": {
                            "type": "number",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "label": "№",
                                "viewedValue": {
                                  "$sum": {
                                    "terms": [
                                      {
                                        "$collection": {
                                          "action": "row-number"
                                        }
                                      },
                                      {
                                        "$element-option": {
                                          "path": "#data.services",
                                          "option": "first"
                                        }
                                      }
                                    ]
                                  }
                                }
                              },
                              "class": {
                                "header": "column_actions",
                                "cell": "column_actions"
                              }
                            }
                          },
                          "additionalService": {
                            "type": "object",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "label": "Наименование услуги"
                              }
                            },
                            "properties": {
                              "name": {
                                "type": "string",
                                "widget": {
                                  "name": "info"
                                }
                              },
                              "servicesType": {
                                "type": "object",
                                "widget": {
                                  "name": "hidden"
                                },
                                "properties": {
                                  "name": {
                                    "type": "string",
                                    "widget": {
                                      "name": "info"
                                    }
                                  }
                                }
                              },
                              "unit": {
                                "type": "string",
                                "widget": {
                                  "name": "hidden"
                                }
                              },
                              "unitPrice": {
                                "type": "string",
                                "widget": {
                                  "name": "hidden"
                                }
                              }
                            }
                          },
                          "servicesType": {
                            "type": "string",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "label": "Тип услуги",
                                "viewedValue": {
                                  "$from-context": {
                                    "path": "$rowData.additionalService.servicesType.name"
                                  }
                                }
                              }
                            }
                          },
                          "discountOrMarkupFlag": {
                            "type": "string",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "visible": false
                              }
                            }
                          },
                          "unitPrice": {
                            "type": "number",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "visible": false
                              }
                            }
                          },
                          "unitPriceWithDiscountOrMarkup": {
                            "type": "number",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "visible": false
                              }
                            }
                          },
                          "unitPriceView": {
                            "type": "object",
                            "model": false,
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "label": "Цена за единицу (руб.)"
                              }
                            },
                            "properties": {
                              "price": {
                                "type": "string",
                                "model": false,
                                "widget": {
                                  "name": "info",
                                  "options": {
                                    "formatter": "number:'0.2-2':'ru'",
                                    "viewedValue": {
                                      "$if": {
                                        "condition": {
                                          "===": {
                                            "operand1": "no",
                                            "operand2": {
                                              "$from-context": {
                                                "path": "$rowData.discountOrMarkupFlag"
                                              }
                                            }
                                          }
                                        },
                                        "then": {
                                          "$from-context": {
                                            "path": "$rowData.additionalService.unitPrice"
                                          }
                                        },
                                        "else": {
                                          "$from-context": {
                                            "path": "$rowData.unitPriceWithDiscountOrMarkup"
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "class": {
                                    "group": "p-text-right",
                                    "value": "p-jc-end"
                                  }
                                }
                              }
                            }
                          },
                          "quantity": {
                            "type": "number",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "visible": false
                              }
                            }
                          },
                          "quantityView": {
                            "type": "object",
                            "model": false,
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "label": "Количество"
                              }
                            },
                            "properties": {
                              "amount": {
                                "type": "string",
                                "model": false,
                                "widget": {
                                  "name": "info",
                                  "options": {
                                    "viewedValue": {
                                      "$if": {
                                        "condition": {
                                          "$empty": {
                                            "data": {
                                              "$subs": {
                                                "path": "#data.services[].quantity"
                                              }
                                            }
                                          }
                                        },
                                        "then": "",
                                        "else": {
                                          "$replace": {
                                            "template": "{{quantity}} {{unit}}",
                                            "data": {
                                              "quantity": {
                                                "$subs": {
                                                  "path": "#data.services[].quantity"
                                                }
                                              },
                                              "unit": {
                                                "$if": {
                                                  "condition": {
                                                    "$empty": {
                                                      "data": {
                                                        "$from-context": {
                                                          "path": "$rowData.additionalService.unit"
                                                        }
                                                      }
                                                    }
                                                  },
                                                  "then": "",
                                                  "else": {
                                                    "$from-context": {
                                                      "path": "$rowData.additionalService.unit"
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "class": {
                                    "group": "p-text-right",
                                    "value": "p-jc-end"
                                  }
                                }
                              }
                            }
                          },
                          "totalPrice": {
                            "type": "number",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "visible": false
                              }
                            }
                          },
                          "totalPriceWithDiscountOrMarkup": {
                            "type": "number",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "visible": false
                              }
                            }
                          },
                          "totalPriceView": {
                            "type": "object",
                            "model": false,
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "label": "Общая стоимость (руб.)"
                              }
                            },
                            "properties": {
                              "price": {
                                "type": "string",
                                "model": false,
                                "widget": {
                                  "name": "info",
                                  "options": {
                                    "formatter": "number:'0.2-2':'ru'",
                                    "viewedValue": {
                                      "$if": {
                                        "condition": {
                                          "===": {
                                            "operand1": "no",
                                            "operand2": {
                                              "$from-context": {
                                                "path": "$rowData.discountOrMarkupFlag"
                                              }
                                            }
                                          }
                                        },
                                        "then": {
                                          "$from-context": {
                                            "path": "$rowData.totalPrice"
                                          }
                                        },
                                        "else": {
                                          "$from-context": {
                                            "path": "$rowData.totalPriceWithDiscountOrMarkup"
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "class": {
                                    "group": "p-text-right",
                                    "value": "p-jc-end"
                                  }
                                }
                              }
                            }
                          },
                          "bookingComment": {
                            "type": "string",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "label": "Комментарий"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "costCalculation": {
                  "type": "object",
                  "model": false,
                  "widget": {
                    "name": "container",
                    "options": {
                      "label": "Расчет стоимости мероприятия"
                    },
                    "class": {
                      "label": "h2 mrg-b-md",
                      "value": "mrg-b-xl"
                    }
                  },
                  "properties": {
                    "discountOrMarkupFlag": {
                      "type": "string",
                      "model": "#data.commonInfo.discountOrMarkupFlag",
                      "value": {
                        "$from-context": {
                          "path": "@preload.event.discountOrMarkupFlag"
                        }
                      },
                      "widget": {
                        "name": "hidden"
                      }
                    },
                    "totalCostView": {
                      "type": "number",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": "Итоговая стоимость по мероприятию",
                          "formatter": "number:'0.2-2':'ru'",
                          "viewedValue": {
                            "$if": {
                              "condition": {
                                "===": {
                                  "operand1": "no",
                                  "operand2": {
                                    "$subs": {
                                      "path": "#data.commonInfo.discountOrMarkupFlag"
                                    }
                                  }
                                }
                              },
                              "then": {
                                "$from-context": {
                                  "path": "@preload.event.totalEventCost"
                                }
                              },
                              "else": {
                                "$from-context": {
                                  "path": "@preload.event.totalEventCostWithDiscountOrMarkup"
                                }
                              }
                            }
                          },
                          "emptyText": "Не указано"
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    },
                    "discountOrMarkup": {
                      "type": "number",
                      "model": "#data.commonInfo.discountOrMarkup",
                      "widget": {
                        "name": "info",
                        "options": {
                          "label": {
                            "$switch": {
                              "condition": {
                                "$subs": {
                                  "path": "#data.commonInfo.discountOrMarkupFlag"
                                }
                              },
                              "default": "",
                              "cases": [
                                {
                                  "value": "discount",
                                  "action": "Скидка"
                                },
                                {
                                  "value": "markup",
                                  "action": "Наценка"
                                }
                              ]
                            }
                          },
                          "viewedValue": {
                            "$replace": {
                              "template": "{{0}}%",
                              "data": [
                                {
                                  "$from-context": {
                                    "path": "@preload.event.discountOrMarkup"
                                  }
                                }
                              ]
                            }
                          },
                          "visible": {
                            "!==": {
                              "operand1": {
                                "$subs": {
                                  "path": "#data.commonInfo.discountOrMarkupFlag"
                                }
                              },
                              "operand2": "no"
                            }
                          }
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "label": "form-label form-label_view p-xs-12 p-md-4",
                          "value": "form-item-element form-item-element_view p-xs-12 p-md-6 p-xl-8"
                        }
                      }
                    }
                  }
                }
              }
            },
            "attachments": {
              "type": "object",
              "model": false,
              "widget": {
                "key": "attachments",
                "name": "tab-panel",
                "options": {
                  "label": "Вложения"
                }
              },
              "properties": {
                "eventDocuments": {
                  "type": "object",
                  "model": false,
                  "widget": {
                    "name": "container",
                    "options": {
                      "label": "Документы по мероприятию"
                    },
                    "class": {
                      "label": "h2 mrg-b-md"
                    }
                  },
                  "properties": {
                    "documents": {
                      "type": "array",
                      "model": "#data.attachments",
                      "value": {
                        "$apply-func": {
                          "func": "$ref:js:prepare-event-files-view",
                          "args": {
                            "input": {
                              "$from-context": {
                                "path": "@preload.event.documents"
                              }
                            }
                          }
                        }
                      },
                      "widget": {
                        "name": "table",
                        "options": {
                          "emptyMessage": "Не добавлено информации для отображения",
                          "first": 0,
                          "rows": 10,
                          "paginator": false
                        },
                        "class": {
                          "group": "form-item p-field p-grid",
                          "value": "p-xs-12"
                        }
                      },
                      "items": {
                        "type": "object",
                        "properties": {
                          "title": {
                            "type": "string",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "label": "Наименование документа"
                              }
                            }
                          },
                          "requirements": {
                            "type": "string",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "label": "Требования к документу"
                              }
                            }
                          },
                          "files": {
                            "type": "array",
                            "widget": {
                              "name": "table-column",
                              "options": {
                                "label": "Файлы"
                              }
                            },
                            "items": {
                              "type": "object",
                              "widget": {
                                "name": "container"
                              },
                              "properties": {
                                "_id": {
                                  "type": "string",
                                  "widget": {
                                    "name": "hidden"
                                  }
                                },
                                "name": {
                                  "type": "string",
                                  "widget": {
                                    "name": "file",
                                    "options": {
                                      "displayParams": {
                                        "showSize": true,
                                        "enableFilesDownload": true
                                      },
                                      "objectId": {
                                        "$query-params": {
                                          "name": "id"
                                        }
                                      }
                                    },
                                    "class": {
                                      "value": "word-break-all word-break-normal-lg file_table-view"
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    "downloadAsArchive": {
                      "type": "string",
                      "value": "Скачать одним архивом",
                      "widget": {
                        "name": "download-file",
                        "methods": {
                          "getFileAsync": {
                            "$fetch-object": {
                              "path": "1",
                              "data": {
                                "$waterfall": {
                                  "arrayFunctions": [
                                    {
                                      "$message": {
                                        "severity": "info",
                                        "summary": "Архив документов",
                                        "detail": "Идет формирование архива..."
                                      }
                                    },
                                    {
                                      "$api-file": {
                                        "workflow": "event",
                                        "action": "view",
                                        "id": {
                                          "$query-params": {
                                            "name": "id"
                                          }
                                        },
                                        "filename": {
                                          "$replace": {
                                            "template": "{{date}}_вложения_к_мероприятию_{{eventNumber}}",
                                            "data": {
                                              "date": {
                                                "$formatter": {
                                                  "format": "datetime:\"YYYY.MM.DD\"",
                                                  "data": {
                                                    "$datetime-now": {}
                                                  }
                                                }
                                              },
                                              "eventNumber": {
                                                "$from-context": {
                                                  "path": "@preload.event.number"
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "type": "archive",
                                        "ids": {
                                          "$apply-func": {
                                            "func": "let result = []; data.forEach(item => {item.files.forEach(file => {result.push(file._id);});}); return result;",
                                            "args": {
                                              "data": {
                                                "$var": {
                                                  "path": "#data.attachments"
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "options": {
                                          "responseType": "blob",
                                          "observe": "response"
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        },
                        "options": {
                          "visible": {
                            ">": {
                              "operand1": {
                                "$length": {
                                  "data": {
                                    "$array-filter": {
                                      "array": {
                                        "$array-pluck": {
                                          "array": {
                                            "$var": {
                                              "path": "#data.attachments"
                                            }
                                          },
                                          "key": "files"
                                        }
                                      },
                                      "filter": {
                                        "$not-empty": {
                                          "data": {
                                            "$from-context": {
                                              "path": "$data"
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "operand2": 1
                            }
                          }
                        },
                        "class": {
                          "link": "p-button button_download button_outline",
                          "value": "p-jc-xl-end"
                        }
                      }
                    }
                  }
                }
              }
            },
            "history": {
              "type": "object",
              "model": false,
              "widget": {
                "key": "history",
                "name": "tab-panel",
                "options": {
                  "label": "История"
                }
              },
              "properties": {
                "table": {
                  "type": "array",
                  "model": "#data.history",
                  "value": {
                    "$api-table-workflow-data": {
                      "model": "#data.history",
                      "workflow": "event",
                      "action": "view",
                      "query": "event/get_event_history",
                      "id": {
                        "$query-params": {
                          "name": "id"
                        }
                      },
                      "variables": {
                        "$assign-object": {
                          "object": {
                            "$graphql-event-variables": {
                              "data": {
                                "$element-event": {
                                  "event": "lazyLoad"
                                }
                              }
                            }
                          },
                          "data": {
                            "eventId": {
                              "$query-params": {
                                "name": "id"
                              }
                            },
                            "bookingId": {
                              "$array-pluck": {
                                "array": {
                                  "$fetch-object": {
                                    "path": "data.items",
                                    "data": {
                                      "$api-data": {
                                        "query": "booking/get_for_view_history",
                                        "id": {
                                          "$query-params": {
                                            "name": "id"
                                          }
                                        },
                                        "variables": {
                                          "eventId": {
                                            "$query-params": {
                                              "name": "id"
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                },
                                "key": "id"
                              }
                            },
                            "additionalFacilitiesId": {
                              "$array-pluck": {
                                "array": {
                                  "$fetch-object": {
                                    "path": "data.items",
                                    "data": {
                                      "$api-data": {
                                        "query": "additional_facilities/get_for_view_history",
                                        "id": {
                                          "$query-params": {
                                            "name": "id"
                                          }
                                        },
                                        "variables": {
                                          "eventId": {
                                            "$query-params": {
                                              "name": "id"
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                },
                                "key": "id"
                              }
                            }
                          },
                          "path": ""
                        }
                      },
                      "errors": {
                        "default": {
                          "$message": {
                            "severity": "error",
                            "summary": "Ошибка",
                            "detail": "При загрузке данных произошла ошибка, повторите попытку позднее"
                          }
                        }
                      }
                    }
                  },
                  "widget": {
                    "name": "table-lazy",
                    "options": {
                      "emptyMessage": "Не добавлено информации для отображения",
                      "first": 0,
                      "rows": 10,
                      "paginator": true
                    },
                    "class": {
                      "group": "p-xxl-12 p-xs-12"
                    }
                  },
                  "items": {
                    "type": "object",
                    "properties": {
                      "user": {
                        "type": "object",
                        "widget": {
                          "name": "table-column",
                          "options": {
                            "label": "Пользователь, который внес изменение"
                          }
                        },
                        "properties": {
                          "userId": {
                            "type": "string",
                            "widget": {
                              "name": "info",
                              "options": {
                                "visible": false
                              }
                            }
                          },
                          "fullName": {
                            "type": "string",
                            "widget": {
                              "name": "info",
                              "options": {
                                "visible": {
                                  "$not": {
                                    "data": {
                                      "$active-user-has-permission": {
                                        "permission": "user.view"
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "fullNameLink": {
                            "type": "string",
                            "widget": {
                              "name": "link",
                              "options": {
                                "target": "_blank",
                                "routerLink": "/cabinet/user/view",
                                "queryParams": {
                                  "id": {
                                    "$from-context": {
                                      "path": "$rowData.user.userId"
                                    }
                                  }
                                },
                                "visible": {
                                  "$active-user-has-permission": {
                                    "permission": "user.view"
                                  }
                                }
                              }
                            },
                            "value": {
                              "$from-context": {
                                "path": "$rowData.user.fullName"
                              }
                            }
                          }
                        }
                      },
                      "createdAt": {
                        "type": "string",
                        "widget": {
                          "name": "table-column",
                          "options": {
                            "visible": false
                          }
                        }
                      },
                      "bookingId": {
                        "type": "string",
                        "widget": {
                          "name": "table-column",
                          "options": {
                            "visible": false
                          }
                        }
                      },
                      "additionalFacilitiesId": {
                        "type": "string",
                        "widget": {
                          "name": "table-column",
                          "options": {
                            "visible": false
                          }
                        }
                      },
                      "createdAtView": {
                        "type": "string",
                        "widget": {
                          "name": "table-column",
                          "options": {
                            "label": "Дата и время внесения изменения",
                            "formatter": "datetime:\"DD.MM.YYYY HH:mm:ss\""
                          }
                        },
                        "value": {
                          "$from-context": {
                            "path": "$rowData.createdAt"
                          }
                        }
                      },
                      "request": {
                        "type": "object",
                        "widget": {
                          "name": "table-column",
                          "options": {
                            "visible": false
                          }
                        },
                        "properties": {
                          "id": {
                            "type": "string",
                            "widget": {
                              "name": "info",
                              "options": {
                                "visible": false
                              }
                            }
                          },
                          "state": {
                            "type": "string",
                            "widget": {
                              "name": "info",
                              "options": {
                                "visible": false
                              }
                            }
                          }
                        },
                        "value": {
                          "$if": {
                            "condition": {
                              "$or": {
                                "operands": [
                                  {
                                    "===": {
                                      "operand1": {
                                        "$from-context": {
                                          "path": "$rowData.actionTitle"
                                        }
                                      },
                                      "operand2": "Добавление мероприятия"
                                    }
                                  },
                                  {
                                    "===": {
                                      "operand1": {
                                        "$from-context": {
                                          "path": "$rowData.actionTitle"
                                        }
                                      },
                                      "operand2": "Редактирование мероприятия"
                                    }
                                  },
                                  {
                                    "===": {
                                      "operand1": {
                                        "$from-context": {
                                          "path": "$rowData.actionTitle"
                                        }
                                      },
                                      "operand2": "Добавление брони помещения"
                                    }
                                  },
                                  {
                                    "===": {
                                      "operand1": {
                                        "$from-context": {
                                          "path": "$rowData.actionTitle"
                                        }
                                      },
                                      "operand2": "Редактирование брони помещения"
                                    }
                                  },
                                  {
                                    "===": {
                                      "operand1": {
                                        "$from-context": {
                                          "path": "$rowData.actionTitle"
                                        }
                                      },
                                      "operand2": "Добавление брони оснащения"
                                    }
                                  },
                                  {
                                    "===": {
                                      "operand1": {
                                        "$from-context": {
                                          "path": "$rowData.actionTitle"
                                        }
                                      },
                                      "operand2": "Редактирование брони оснащения"
                                    }
                                  },
                                  {
                                    "===": {
                                      "operand1": {
                                        "$from-context": {
                                          "path": "$rowData.actionTitle"
                                        }
                                      },
                                      "operand2": "Редактирование дополнительного оснащения к помещению"
                                    }
                                  }
                                ]
                              }
                            },
                            "then": {
                              "$fetch-object": {
                                "path": "0",
                                "data": {
                                  "$array-filter": {
                                    "array": {
                                      "$fetch-object": {
                                        "path": "data.object",
                                        "data": {
                                          "$api-data": {
                                            "query": "event/get_request_id",
                                            "id": {
                                              "$query-params": {
                                                "name": "id"
                                              }
                                            },
                                            "variables": {
                                              "eventId": {
                                                "$query-params": {
                                                  "name": "id"
                                                }
                                              },
                                              "userId": {
                                                "$from-context": {
                                                  "path": "$rowData.user.userId"
                                                }
                                              },
                                              "bookingId": {
                                                "$from-context": {
                                                  "path": "$rowData.bookingId"
                                                }
                                              },
                                              "additionalFacilitiesId": {
                                                "$from-context": {
                                                  "path": "$rowData.additionalFacilitiesId"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "filter": {
                                      "===": {
                                        "operand1": {
                                          "$date-format": {
                                            "template": "DD.MM.YYYY HH:mm:ss",
                                            "nameZone": "ETC/GMT+0",
                                            "value": {
                                              "$from-context": {
                                                "path": "$data.createdAt"
                                              }
                                            }
                                          }
                                        },
                                        "operand2": {
                                          "$date-format": {
                                            "template": "DD.MM.YYYY HH:mm:ss",
                                            "nameZone": "ETC/GMT+0",
                                            "value": {
                                              "$from-context": {
                                                "path": "$rowData.createdAt"
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      },
                      "actionTitle": {
                        "type": "string",
                        "widget": {
                          "name": "table-column",
                          "options": {
                            "visible": false
                          }
                        }
                      },
                      "change": {
                        "type": "object",
                        "widget": {
                          "name": "table-column",
                          "options": {
                            "label": "Изменение"
                          }
                        },
                        "properties": {
                          "actionTitleView": {
                            "type": "string",
                            "widget": {
                              "name": "info"
                            },
                            "value": {
                              "$from-context": {
                                "path": "$rowData.actionTitle"
                              }
                            }
                          },
                          "cancelReason": {
                            "type": "string",
                            "widget": "html",
                            "value": {
                              "$if": {
                                "condition": {
                                  "===": {
                                    "operand1": {
                                      "$from-context": {
                                        "path": "$rowData.actionTitle"
                                      }
                                    },
                                    "operand2": "Отмена мероприятия"
                                  }
                                },
                                "then": {
                                  "$replace": {
                                    "template": "<div class=\"text-secondary mrg-t-xs\"><b>Причина отмены:</b><br/>{{reason}}</div>",
                                    "data": {
                                      "reason": {
                                        "$from-context": {
                                          "path": "@preload.event.cancelReason"
                                        }
                                      }
                                    }
                                  }
                                },
                                "else": ""
                              }
                            }
                          },
                          "request": {
                            "type": "string",
                            "widget": {
                              "name": "info",
                              "options": {
                                "visible": {
                                  "$not": {
                                    "data": {
                                      "$active-user-has-permission": {
                                        "permission": "request.view"
                                      }
                                    }
                                  }
                                }
                              },
                              "class": {
                                "value": "text-secondary mrg-t-xs"
                              }
                            },
                            "value": {
                              "$if": {
                                "condition": {
                                  "$or": {
                                    "operands": [
                                      {
                                        "===": {
                                          "operand1": {
                                            "$from-context": {
                                              "path": "$rowData.actionTitle"
                                            }
                                          },
                                          "operand2": "Добавление мероприятия"
                                        }
                                      },
                                      {
                                        "===": {
                                          "operand1": {
                                            "$from-context": {
                                              "path": "$rowData.actionTitle"
                                            }
                                          },
                                          "operand2": "Редактирование мероприятия"
                                        }
                                      },
                                      {
                                        "===": {
                                          "operand1": {
                                            "$from-context": {
                                              "path": "$rowData.actionTitle"
                                            }
                                          },
                                          "operand2": "Добавление брони помещения"
                                        }
                                      },
                                      {
                                        "===": {
                                          "operand1": {
                                            "$from-context": {
                                              "path": "$rowData.actionTitle"
                                            }
                                          },
                                          "operand2": "Редактирование брони помещения"
                                        }
                                      },
                                      {
                                        "===": {
                                          "operand1": {
                                            "$from-context": {
                                              "path": "$rowData.actionTitle"
                                            }
                                          },
                                          "operand2": "Добавление брони оснащения"
                                        }
                                      },
                                      {
                                        "===": {
                                          "operand1": {
                                            "$from-context": {
                                              "path": "$rowData.actionTitle"
                                            }
                                          },
                                          "operand2": "Редактирование брони оснащения"
                                        }
                                      },
                                      {
                                        "===": {
                                          "operand1": {
                                            "$from-context": {
                                              "path": "$rowData.actionTitle"
                                            }
                                          },
                                          "operand2": "Редактирование дополнительного оснащения к помещению"
                                        }
                                      }
                                    ]
                                  }
                                },
                                "then": {
                                  "$if": {
                                    "condition": {
                                      "$not-empty": {
                                        "data": {
                                          "$subs": {
                                            "path": "#data.history.[].request.id"
                                          }
                                        }
                                      }
                                    },
                                    "then": "Создана заявка"
                                  }
                                }
                              }
                            }
                          },
                          "requestLink": {
                            "type": "string",
                            "widget": {
                              "name": "link",
                              "options": {
                                "target": "_blank",
                                "routerLink": {
                                  "$if": {
                                    "condition": {
                                      "$or": {
                                        "operands": [
                                          {
                                            "===": {
                                              "operand1": {
                                                "$from-context": {
                                                  "path": "$rowData.actionTitle"
                                                }
                                              },
                                              "operand2": "Добавление мероприятия"
                                            }
                                          },
                                          {
                                            "===": {
                                              "operand1": {
                                                "$from-context": {
                                                  "path": "$rowData.actionTitle"
                                                }
                                              },
                                              "operand2": "Редактирование мероприятия"
                                            }
                                          }
                                        ]
                                      }
                                    },
                                    "then": {
                                      "$if": {
                                        "condition": {
                                          "===": {
                                            "operand1": {
                                              "$subs": {
                                                "path": "#data.history.[].request.state"
                                              }
                                            },
                                            "operand2": "new"
                                          }
                                        },
                                        "then": "/cabinet/request/view_new",
                                        "else": "/cabinet/request/view"
                                      }
                                    },
                                    "else": {
                                      "$if": {
                                        "condition": {
                                          "$or": {
                                            "operands": [
                                              {
                                                "===": {
                                                  "operand1": {
                                                    "$from-context": {
                                                      "path": "$rowData.actionTitle"
                                                    }
                                                  },
                                                  "operand2": "Добавление брони помещения"
                                                }
                                              },
                                              {
                                                "===": {
                                                  "operand1": {
                                                    "$from-context": {
                                                      "path": "$rowData.actionTitle"
                                                    }
                                                  },
                                                  "operand2": "Редактирование брони помещения"
                                                }
                                              }
                                            ]
                                          }
                                        },
                                        "then": {
                                          "$if": {
                                            "condition": {
                                              "===": {
                                                "operand1": {
                                                  "$subs": {
                                                    "path": "#data.history.[].request.state"
                                                  }
                                                },
                                                "operand2": "new"
                                              }
                                            },
                                            "then": "/cabinet/request/view_new_for_booking",
                                            "else": "/cabinet/request/view_for_booking"
                                          }
                                        },
                                        "else": {
                                          "$if": {
                                            "condition": {
                                              "===": {
                                                "operand1": {
                                                  "$subs": {
                                                    "path": "#data.history.[].request.state"
                                                  }
                                                },
                                                "operand2": "new"
                                              }
                                            },
                                            "then": "/cabinet/request/view_new_for_additional_facilities",
                                            "else": "/cabinet/request/view_for_additional_facilities"
                                          }
                                        }
                                      }
                                    }
                                  }
                                },
                                "queryParams": {
                                  "id": {
                                    "$subs": {
                                      "path": "#data.history.[].request.id"
                                    }
                                  }
                                },
                                "visible": {
                                  "$active-user-has-permission": {
                                    "permission": "request.view"
                                  }
                                }
                              }
                            },
                            "value": {
                              "$if": {
                                "condition": {
                                  "$or": {
                                    "operands": [
                                      {
                                        "===": {
                                          "operand1": {
                                            "$from-context": {
                                              "path": "$rowData.actionTitle"
                                            }
                                          },
                                          "operand2": "Добавление мероприятия"
                                        }
                                      },
                                      {
                                        "===": {
                                          "operand1": {
                                            "$from-context": {
                                              "path": "$rowData.actionTitle"
                                            }
                                          },
                                          "operand2": "Редактирование мероприятия"
                                        }
                                      },
                                      {
                                        "===": {
                                          "operand1": {
                                            "$from-context": {
                                              "path": "$rowData.actionTitle"
                                            }
                                          },
                                          "operand2": "Добавление брони помещения"
                                        }
                                      },
                                      {
                                        "===": {
                                          "operand1": {
                                            "$from-context": {
                                              "path": "$rowData.actionTitle"
                                            }
                                          },
                                          "operand2": "Редактирование брони помещения"
                                        }
                                      },
                                      {
                                        "===": {
                                          "operand1": {
                                            "$from-context": {
                                              "path": "$rowData.actionTitle"
                                            }
                                          },
                                          "operand2": "Добавление брони оснащения"
                                        }
                                      },
                                      {
                                        "===": {
                                          "operand1": {
                                            "$from-context": {
                                              "path": "$rowData.actionTitle"
                                            }
                                          },
                                          "operand2": "Редактирование брони оснащения"
                                        }
                                      },
                                      {
                                        "===": {
                                          "operand1": {
                                            "$from-context": {
                                              "path": "$rowData.actionTitle"
                                            }
                                          },
                                          "operand2": "Редактирование дополнительного оснащения к помещению"
                                        }
                                      }
                                    ]
                                  }
                                },
                                "then": {
                                  "$if": {
                                    "condition": {
                                      "$not-empty": {
                                        "data": {
                                          "$subs": {
                                            "path": "#data.history.[].request.id"
                                          }
                                        }
                                      }
                                    },
                                    "then": "Заявка"
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "actions-button-menu": {
          "type": "array",
          "model": "#data.actions",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "widget": "hidden"
              },
              "title": {
                "type": "string",
                "widget": "hidden"
              },
              "icon": {
                "type": "string",
                "widget": "hidden"
              },
              "url": {
                "type": "string",
                "widget": "hidden"
              },
              "routerLink": {
                "type": "string",
                "widget": "hidden"
              },
              "popup": {
                "type": "string",
                "widget": "hidden"
              },
              "hidden": {
                "type": "string",
                "widget": "hidden"
              }
            },
            "widget": {
              "name": "fieldset"
            }
          },
          "value": {
            "$if": {
              "condition": {
                "$active-user-has-permission": {
                  "permission": "event.list"
                }
              },
              "then": {
                "$array-push": {
                  "array": {
                    "$array-filter": {
                      "array": {
                        "$from-context": {
                          "path": "$response.body.0",
                          "data": {
                            "$http-code": {
                              "200": {},
                              "422": [
                                "$ref:operation-frontend:snippets/element/_http_message/http-errors-from-response"
                              ],
                              "client": {
                                "$api-workflow-actions": {
                                  "options": {
                                    "observe": "response"
                                  },
                                  "type": "get",
                                  "id": {
                                    "$query-params": {
                                      "name": "id"
                                    }
                                  }
                                }
                              },
                              "finalize": "$ref:operation-frontend:snippets/element/_loading/onclick-loading-disable",
                              "default": [
                                "$ref:operation-frontend:snippets/element/_http_message/http-default-error-message-action"
                              ]
                            }
                          }
                        }
                      },
                      "filter": {
                        "$not": {
                          "data": {
                            "$in": {
                              "array": [
                                "add",
                                "view"
                              ],
                              "value": {
                                "$from-context": {
                                  "path": "$data.name"
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  },
                  "data": {
                    "title": "К реестру мероприятий",
                    "routerLink": "/cabinet/event/list"
                  }
                }
              },
              "else": {
                "$array-filter": {
                  "array": {
                    "$from-context": {
                      "path": "$response.body.0",
                      "data": {
                        "$http-code": {
                          "200": {},
                          "422": [
                            "$ref:operation-frontend:snippets/element/_http_message/http-errors-from-response"
                          ],
                          "client": {
                            "$api-workflow-actions": {
                              "options": {
                                "observe": "response"
                              },
                              "type": "get",
                              "id": {
                                "$query-params": {
                                  "name": "id"
                                }
                              }
                            }
                          },
                          "finalize": "$ref:operation-frontend:snippets/element/_loading/onclick-loading-disable",
                          "default": [
                            "$ref:operation-frontend:snippets/element/_http_message/http-default-error-message-action"
                          ]
                        }
                      }
                    }
                  },
                  "filter": {
                    "$not": {
                      "data": {
                        "$in": {
                          "array": [
                            "add",
                            "view"
                          ],
                          "value": {
                            "$from-context": {
                              "path": "$data.name"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "widget": {
            "name": "actions-menu",
            "options": {
              "labelKey": "title"
            },
            "class": {
              "group": "actions-button-menu-widget"
            },
            "items": {
              "$subs": {
                "path": "#data.actions"
              }
            }
          }
        }
      }
    }
  }
}
